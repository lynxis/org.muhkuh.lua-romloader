machine:
  pre:
    - sudo dpkg --purge cmake cmake-doc cmake-data
    - curl http://download.opensuse.org/repositories/home:/doc_bacardi/xUbuntu_12.04/Release.key | sudo apt-key add -
    - echo "deb http://download.opensuse.org/repositories/home:/doc_bacardi/xUbuntu_12.04 ./" | sudo tee -a /etc/apt/sources.list
    - sudo apt-get update -qq
    - sudo apt-get --assume-yes install mingw-w64-mbs
    - sudo apt-get --assume-yes install cmake3
  environment:
    PATH: /opt/mingw-w64-i686/bin:/opt/mingw-w64-x86_64/bin:${PATH}
  python:
    version: 2.7.10


dependencies:
  cache_directories:
    - "~/.mbs" # The Muhkuh build system.
    - "~/.ant" # The ANT modules.


checkout:
  post:
    - git submodule sync
    - git submodule update --init


general:
  artifacts:
    - "build/ivy.xml"
    - "build/lua51-romloader.zip"


test:
  override:
    - ./.build.sh
